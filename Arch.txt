useful source: https://www.youtube.com/watch?v=jncc3QL8RWI

Packages during initial install
sudo, git, vim, base, linux, linux-firmware

necessary packages
sudo pacman -S --needed base-devel

yay Config
https://www.tecmint.com/install-yay-aur-helper-in-arch-linux-and-manjaro/

glxinfo 
yay -S glxinfo

# Installing Nvidia Drivers

First we need to check which GPU we are running

lspci -k | grep -A 2 -E "(VGA|3D)"

In some cases you will see two, this is a hybrid GPU, for me this is an integrated intel and nvidia GPU in my laptop. 

The following steps will ensure that we can use both.

check your drivers are compatible: 
https://nouveau.freedesktop.org/CodeNames.html
https://wiki.archlinux.org/title/PRIME#Closed-source_drivers

install drivers:
sudo pacman -S nvidia nvidia-utils nvidia-settings

Since xorg v 127 the xorg config is no longer needed because the options are included in the driver directly.

We do need to install nvidia-prime however

sudo pacman -S nvidia-prime


We can then reboot

and test via

sudo prime-run glxinfo | grep "OpenGL renderer"

the output expected: 
OpenGL renderer string: NVIDIA GeForce RTX 2070/PCIe/SSE2


# Managing the GPU

You can check which GPU is being used in KDE in the info centre. 

For me at this point this shows my intel GPU the enxt steps will let us swap between nvidia and intel.

we can switch to our Nvidia gpu using: prime-run program

This is a manual method doing this from the terminal.


# Optimus

https://wiki.archlinux.org/title/NVIDIA_Optimus

yay -S optimus-manager

We can use the optimus manager to control which GPU we use as well
, prime-offload will let us do this on a per application basis, optimus
can be set to use the GPU anytime we please, and also comes with a KDE widget.

https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqa1k5eDFlRE1SQTdGMXQtUTdFczRFUlpLS0RxUXxBQ3Jtc0tsei1SbnBvb0VzWm9famYyRExoai1qNEZZVlBickNTcmVzcnBVc2h3RmZSUDFWRU03OVJmU0tBQmpic3hiVWp1MGVUY3k1cE45YWlFYXc5WmFvX3h5SnltVGhiOU41REJPRUVuM2hPNUVZaFBzei1KUQ&q=https%3A%2F%2Fgithub.com%2FAskannz%2Foptimus-manager&v=jncc3QL8RWI

yay -S optimus-manager optimus-manager-qt

There is also a gnome version of the widget called: optimus-manager-indicator

We can then contorl our GPU via optimus-manager either within the widget
or via the terminal

optimus-manager --switch nvidia
optimus-manager --switch intel 
optimus-manager --switch hybrid


# Power Management

It is important to manually configure power management. Prior to this 
the GPU will remain on and consuming power as it is disabled by default since v1.2
we must however be careful as incorrect configuration can break the boot process.


I am using the latest driver and have a Turing generation GPU and coffee lake cpu, 
therefore I can use the following method:

Temporary config can be made to prevent the chance of lockup:
optimus-manager --temp-config path/to/file.conf

main changes should be stored in:
/etc/optimus-manager/optimus-manager.conf

https://github.com/Askannz/optimus-manager/wiki/A-guide--to-power-management-options



# enable multilib

sudo vin /etc/pacman.conf

uncomment multilib

sudo pacman -Syy



# Install Brave

yay -Sy brave 


# Install Steam

pacman -Sy steam


# Install Docker

pacman -Sy docker
